

---

### **1. 至少一个预测变量是否有用？**

- **目标：** 判断回归模型中的预测变量是否对响应变量有预测作用。  
- **方法：**  
  1. 计算 **总平方和（Total Sum of Squares, TSS）**：这是使用响应变量均值作为预测值时的总方差（即没有预测变量的模型）。
  2. 计算 **残差平方和（Residual Sum of Squares, RSS）**：这是使用所有预测变量拟合后的误差平方和。
  3. 使用 **解释方差比例** 计算公式：

  $$
   R^2 = 1 - \frac{RSS}{TSS}
  $$

  - $R^2$ 表示模型解释的响应变量总方差比例。例如，若增加了新预测变量后，$R^2$ 从 $0.6$ 增加至 $0.897$，说明模型解释了近 90% 的方差。

---

### **F统计量：量化预测变量的重要性**

- **F统计量计算公式：**

   $$
   F = \frac{\frac{TSS - RSS}{P}}{\frac{RSS}{n - P - 1}}
   $$

  - **参数：**
    - **TSS**：总平方和  
    - **RSS**：残差平方和  
    - **P**：预测变量数量  
    - **n**：样本量  
    - 自由度：分子自由度为 $P$，分母自由度为 $n - P - 1$

- **P值的判断：**  
  若 $p < 0.001$，说明模型中的预测变量在统计上显著，并且与响应变量高度相关。

---

### **2. 如何确定重要的预测变量？**

- **全子集回归（All Subsets Regression）或最佳子集回归（Best Subsets Regression）：**  
  - 构建所有可能的预测变量组合，并计算每个模型的拟合效果和误差。
  - **问题：** 当变量数量较大时，模型数以指数级增长（$2^P$）。例如，当 $P = 40$ 时，可能的模型总数超过 10 亿，穷举法计算代价极高。

---

### **自动化变量选择方法**

1. **前向选择法（Forward Selection）：**
   - **步骤：**
     1. 从**空模型**（仅包含截距项）开始。
     2. 每次加入一个预测变量，使**残差平方和（RSS）**降低最多的变量入模。
     3. 重复此过程，直到所有剩余变量的 p 值大于某个阈值。
   - **优点：** 适用于变量较多的数据集，计算效率高。

2. **后向选择法（Backward Selection）：**
   - **步骤：**
     1. 从**完整模型**（包含所有变量）开始。
     2. 每次移除对模型影响最小的变量（基于 T 统计量的显著性）。
     3. 重复此过程，直到所有剩余变量的显著性满足阈值。

3. **模型选择准则：**

   $$
   AIC, \quad BIC, \quad C_p, \quad \text{调整后的} \ R^2
   $$

   - **交叉验证（Cross-Validation）**：用于评估模型的泛化能力。

---

### **3. 如何处理定性预测变量（分类变量）？**

- **哑变量（Dummy Variables）：** 将分类变量转换为 0 和 1 的二元变量。

#### **示例：性别**

- 假设性别变量，女性记为 $1$，男性记为 $0$。

   $$
   Y = \beta_0 + \beta_1 \cdot \text{性别} + \epsilon
   $$

- **解释：** $\beta_1$ 表示与男性（基准组）相比，女性对响应变量的影响。

---

### **处理多水平分类变量**

- 对于有 $K$ 个类别的分类变量，创建 $K - 1$ 个哑变量。

#### **示例：种族变量**

- 假设有三个种族类别：**亚洲人、白人、非洲裔**。  

   $$
   X_1 = \begin{cases}
   1, & \text{若为亚洲人} \\
   0, & \text{否则}
   \end{cases}, \quad
   X_2 = \begin{cases}
   1, & \text{若为白人} \\
   0, & \text{否则}
   \end{cases}
   $$

- 非洲裔作为**基准组**。

- **模型表达式：**

   $$
   Y = \beta_0 + \beta_1 \cdot X_1 + \beta_2 \cdot X_2 + \epsilon
   $$

- **解释：**
  - $\beta_1$：亚洲人相对于非洲裔的影响。
  - $\beta_2$：白人相对于非洲裔的影响。

---

### **4. 如何评估模型的拟合效果和预测能力？**

- **模型拟合指标：**
  1. **R²**：解释的方差比例。
  2. **调整后的 R²**：调整变量数量对模型拟合的影响。
  3. **均方误差（MSE）：**

     $$
     MSE = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2
     $$

- **预测：**  
  根据新的预测变量值，使用模型生成预测值。

---

### **5. 其他回归模型中的注意事项**

- **交互效应（Interaction Effects）：**  
  检查变量之间的组合效应（如电视和广播广告）。

- **非线性关系：**  
  使用多项式回归或变量变换处理非线性关系。

- **多重共线性（Multicollinearity）：**  
  使用方差膨胀因子（VIF）检测共线性问题。

- **异方差性（Heteroscedasticity）：**  
  通过残差图检查误差方差是否随变量变化。

---

