# **StatQuest：相关系数（Correlation）详细笔记**

---

## **1. 什么是相关系数（Correlation Coefficient）？**

- **相关系数（Correlation Coefficient）**用于衡量**两个变量之间线性关系的强度和方向**。  
- 相关系数的取值范围在 $[-1, 1]$ 之间：  
  - **$r = 1$**：完全正相关。两个变量的值成比例地增加或减少，所有数据点落在**正斜率的直线上**。  
  - **$r = -1$**：完全负相关。当一个变量增加时，另一个变量按比例减少，所有数据点落在**负斜率的直线上**。  
  - **$r = 0$**：两个变量之间**没有线性关系**。

---

## **2. 相关系数的公式**

$$
r = \frac{\text{Cov}(X, Y)}{\sqrt{\text{Var}(X) \cdot \text{Var}(Y)}}
$$

- **Cov$(X, Y)$**：$X$ 和 $Y$ 的协方差。  
- **Var$(X)$ 和 Var$(Y)$**：$X$ 和 $Y$ 的方差。  

相关系数将协方差标准化，从而消除了数据单位的影响，使结果更易于解读。

---

## **3. 计算相关系数的步骤**

1. **计算均值**：
   - $ \bar{X} = \frac{1}{n} \sum_{i=1}^{n} X_i $  
   - $ \bar{Y} = \frac{1}{n} \sum_{i=1}^{n} Y_i $

2. **计算协方差**：
   $$
   \text{Cov}(X, Y) = \frac{\sum_{i=1}^{n} (X_i - \bar{X})(Y_i - \bar{Y})}{n - 1}
   $$

3. **计算方差**：
   - $ \text{Var}(X) = \frac{\sum_{i=1}^{n} (X_i - \bar{X})^2}{n - 1} $  
   - $ \text{Var}(Y) = \frac{\sum_{i=1}^{n} (Y_i - \bar{Y})^2}{n - 1} $

4. **计算相关系数**：
   $$
   r = \frac{\text{Cov}(X, Y)}{\sqrt{\text{Var}(X) \cdot \text{Var}(Y)}}
   $$

---

## **4. 相关系数的性质**

1. **尺度无关性**：  
   - **相关系数不受数据单位或尺度的影响**。即使将变量从米转换为厘米，相关系数的值也不会改变。

2. **范围限制**：  
   - $r$ 的值只能在 $[-1, 1]$ 之间。  
     - 越接近 $1$ 或 $-1$，表明关系越强。  
     - 越接近 $0$，表明关系越弱。

3. **相关不代表因果关系**：  
   - **高相关性并不意味着因果关系**，只能说明变量之间存在关联。

---

## **5. 解释强关系与弱关系**

1. **强关系**：
   - 数据点紧密分布在拟合直线附近，相关系数接近 $1$（正相关）或 $-1$（负相关）。  
   - 示例：$r = 0.9$ 表示变量之间存在强正相关。

2. **弱关系**：
   - 数据点分布较散，相关系数接近 $0$。  
   - 示例：$r = 0.2$ 表示变量之间关系较弱。

---

## **6. 正相关与负相关**

- **正相关（$r > 0$）**：当一个变量增加时，另一个变量也增加。  
- **负相关（$r < 0$）**：当一个变量增加时，另一个变量减少。

---

## **7. 相关系数与p值**

1. **p值的意义**：
   - **p值**表示观察到的相关性是否可能仅由随机因素导致。  
   - **p值越小**，我们对相关关系的信心越大。

2. **示例**：
   - 如果 $p = 0.03$，意味着在无关系假设成立的情况下，有3%的概率会观察到如此强或更强的关系。

---

## **8. 示例：计算相关系数**

### **数据示例**

- **Gene X**：$[10, 20, 30, 40, 50]$  
- **Gene Y**：$[15, 25, 35, 45, 55]$

### **计算过程**

1. **计算均值**：
   - $\bar{X} = 30$  
   - $\bar{Y} = 35$

2. **计算协方差**：
   $$
   \text{Cov}(X, Y) = \frac{(10 - 30)(15 - 35) + \dots + (50 - 30)(55 - 35)}{4} = 250
   $$

3. **计算方差**：
   $$
   \text{Var}(X) = \frac{(10 - 30)^2 + \dots + (50 - 30)^2}{4} = 250
   $$
   $$
   \text{Var}(Y) = \frac{(15 - 35)^2 + \dots + (55 - 35)^2}{4} = 250
   $$

4. **计算相关系数**：
   $$
   r = \frac{250}{\sqrt{250 \cdot 250}} = 1
   $$

---

## **9. 小数据集的风险**

- 当数据量较小时，即使两个随机点之间也可以画出一条直线，使相关系数为 $r = 1$。  
- 但随着数据点的增加，绘制出通过所有点的直线的概率会降低，因此需要**更多数据来增加信心**。

---

## **10. R平方（$R^2$）与相关系数**

- **$R^2$**表示模型解释的数据方差的比例：  
  $$
  R^2 = r^2
  $$

- **解释**：  
   - 如果 $R^2 = 0.81$，表示模型解释了81%的数据方差。

---

## **11. 相关系数的局限性**

1. **仅检测线性关系**：  
   - 相关系数只能描述线性关系，无法检测非线性关系。

2. **不代表因果关系**：  
   - 高相关性并不一定意味着因果关系，需要其他分析来验证。

---

## **12. 总结**

1. **相关系数衡量两个变量之间的线性关系的强度和方向**。  
2. **取值范围**：$r$ 在 $[-1, 1]$ 之间。  
3. **p值**帮助判断相关关系是否显著。  
4. **R平方（$R^2$）**表示模型解释的数据方差比例。

---

## **13. 最后的话：Quest On!**

- 如果你喜欢本次StatQuest并希望学习更多内容，请**订阅**我们的频道！  
- 有任何问题或建议，请在**评论区留言**！  
- 支持StatQuest：你可以购买我的音乐、T恤或捐赠，链接在描述中。

---

**Quest On!** 🎯